<!-- page container -->
<!-- <div class="banner" style= "height: 50vh; background-image: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)) url(https://images.unsplash.com/photo-1521967906867-14ec9d64bee8?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=750&q=80)">
 -->
  <div class="container-fluid">
    <!-- page header -->
      <div class="row d-flex justify-content-center my-4" style= background-image: url('<% image_url "peter-lewicki-Wfh650C1OHU-unsplash.jpg"%>')>
      <div class="col-12 col-sm-12 col-md-10 col-lg-8 text-center">
        <%= image_tag "popcorn-logo.svg", class: "pb-5"  %>
        <h1 class="my-4 title">O que você quer assistir?</h1>
      <input id="q" class="form-control form-control-lg my-4" value="" type="text">
      </div>
    </div>
  </div>

  <!-- algolia results div -->
  <div id="hits" class="row justify-content-center"></div>

  <!-- start algolia script -->
  <script type="text/javascript">
    const hitTemplate = `
      <div class="card-element mb-4">
        <!-- play poster -->
        <div class="card-play-wrap">
          <a href="{{link}}" alt="{{name}}" target="_blank">
            <img src="{{poster_url}}" class="card-thumb">
            <div class="card-play"><i class="fas fa-play"></i></div>
          </a>
        </div>
        <!-- end play poster -->
        <div class="card-info">
          <h2 class="border-bottom mb-2 pb-2 title">
          <a href="movies/{{id}}" alt="{{name}}">{{name}}</a></h2>
          <p class="small">Plataforma: {{platform}}</p>
          <p class="small">{{year}} | {{genre.name}} | {{duration}} min.</p>
        </div>
      </div>`;

    const search = instantsearch({
      appId: '<%= ENV['ALGOLIASEARCH_APPLICATION_ID'] %>',
      apiKey: '<%= ENV['ALGOLIASEARCH_API_KEY_SEARCH'] %>',
      indexName: '<%= Movie.index_name %>',
      urlSync: true
    });

    search.addWidget(
      instantsearch.widgets.searchBox({
        container: '#q',
        placeholder: 'Digite um tema, assunto, gênero, nome, diretor, país...',
        autofocus: true,
        poweredBy: false
      })
    );

    search.addWidget(
      instantsearch.widgets.hits({
        container: '#hits',
        templates: {
          empty: '<h2 class="not-found my-4">Nenhum resultado 🙁 Tente outra vez...🍿</h2>',
          item: hitTemplate
        },
        cssClasses: {
          item: 'col-6 col-sm-6 col-md-3 col-lg-2',
        },
        hitsPerPage: 10
      })
    );

    search.start();
  </script>
</div>
<!-- end container -->
